<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mathematics Lesson: Affine Functions â€“ Part IV</title>
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/icons/icon-96x96.png">
    <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png">
    <!-- Theme Color -->
    <meta name="theme-color" content="#27AE60" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#E67E22" media="(prefers-color-scheme: dark)">
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Mathematics Hub">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-TileColor" content="#27AE60">
    <!-- KaTeX CSS -->
    <link rel="stylesheet" href="styles/katex.min.css">
    <!-- Styles -->
    <link rel="stylesheet" href="styles/common.css">
    <style>
        /* Fresh palette â€“ Green & Orange */
        :root {
            --primary: #27AE60;        /* Emerald */
            --primary-light: #6FCF97;
            --primary-dark: #1E8449;
            --secondary: #E67E22;      /* Carrot */
            --secondary-light: #F39C12;
            --secondary-dark: #D35400;
            --accent: #3498DB;
            --warning: #E74C3C;
            --info: #2ECC71;
            --text: #333333;
            --text-light: #666666;
            --background: #FFFFFF;
            --surface: #F8F9FA;
            --border: #E9ECEF;
            --shadow: rgba(0, 0, 0, 0.1);
        }
        [data-theme="dark"] {
            --primary: #1E8449;
            --primary-light: #27AE60;
            --primary-dark: #145A32;
            --secondary: #D35400;
            --secondary-light: #E67E22;
            --secondary-dark: #A04000;
            --accent: #5DADE2;
            --warning: #C0392B;
            --info: #27AE60;
            --text: #FFFFFF;
            --text-light: #CCCCCC;
            --background: #121212;
            --surface: #1E1E1E;
            --border: #333333;
            --shadow: rgba(0, 0, 0, 0.3);
        }
        .katex { font-size: 1.1em; }
        .MH-equation {
            font-family: inherit;
            font-size: 1.1em;
            color: var(--primary-dark);
            margin: 0.5em 0;
            padding: 0.3em 0.8em;
            background: rgba(39, 174, 96, 0.05);
            border-left: 4px solid var(--primary);
            border-radius: 4px;
            display: inline-block;
        }
        .MH-canvas-container { margin: 2em 0; text-align: center; }
        .MH-canvas {
            border: 2px solid var(--border);
            border-radius: 8px;
            background-color: var(--surface);
            max-width: 100%;
            box-shadow: 0 4px 6px var(--shadow);
        }
        .MH-canvas-title { font-weight: bold; margin-bottom: 0.5em; color: var(--primary); }
        .MH-canvas-instructions { font-size: 0.9em; color: var(--text-light); margin-top: 0.5em; font-style: italic; }
        .MH-construction-step {
            margin: 1.5em 0;
            padding: 1em;
            background-color: var(--surface);
            border-left: 4px solid var(--secondary);
            border-radius: 4px;
        }
        .MH-construction-step h4 { margin-top: 0; color: var(--secondary-dark); }
        .MH-solution {
            display: none;
            margin-top: 1em;
            padding: 1.2em;
            background: var(--surface);
            border-radius: 8px;
            border-left: 6px solid var(--secondary);
            color: var(--text);
            box-shadow: 0 2px 8px var(--shadow);
        }
        .MH-solution-btn {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.2s;
            margin-right: 0.5em;
        }
        .MH-solution-btn:hover { background-color: var(--secondary-dark); }
        .MH-exercise-number {
            font-size: 1.4em;
            font-weight: bold;
            color: var(--primary-dark);
            margin: 1.5em 0 0.5em 0;
            border-bottom: 3px solid var(--primary-light);
            padding-bottom: 0.3em;
        }
        .MH-important { background: rgba(39, 174, 96, 0.1); padding: 1em; border-radius: 8px; margin: 1em 0; }
        .MH-step { margin-left: 1em; }
        @media (max-width: 768px) { .MH-canvas { max-width: 100%; height: auto; } }
    </style>
</head>
<body>
    <header>
        <div class="MH-header-grid">
            <div class="MH-header-column MH-header-icon">
                <a href="index.html" class="MH-logo-link" data-tooltip>
                    <img src="assets/icons/icon-96x96.png" alt="Mathematics Hub Logo" class="MH-logo-image">
                </a>
            </div>
            <div class="MH-header-column MH-header-title">
                <div class="MH-logo" data-i18n="MH.general.title">Mathematics Hub</div>
            </div>
            <div class="MH-header-column MH-header-options">
                <div class="MH-header-controls">
                    <button class="MH-theme-toggle" id="themeToggle">
                        <span data-i18n="MH.general.theme">Theme</span>
                        <span>ğŸŒ™</span>
                    </button>
                    <div class="MH-language-selector">
                        <button class="MH-language-btn" id="languageBtn">
                            <span data-i18n="MH.general.language">Language</span>
                            <span>â–¼</span>
                        </button>
                        <div class="MH-language-dropdown" id="languageDropdown">
                            <a href="#" class="MH-language-option" data-lang="en">English</a>
                            <a href="#" class="MH-language-option" data-lang="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</a>
                            <a href="#" class="MH-language-option" data-lang="fr">FranÃ§ais</a>
                        </div>
                    </div>
                    <button class="MH-notification-btn" id="notificationBtn" style="display: none;">
                        <span data-i18n="MH.general.enableNotifications">Enable Notifications</span>
                        <span>ğŸ””</span>
                    </button>
                </div>
            </div>
        </div>
    </header>
    <main id="main-content" class="MH-container" tabindex="-1">
        <h1 class="MH-lesson-title" data-i18n="MH.lesson_Y1Alg_fonAff4.title">Affine Functions: Part IV</h1>
        <h2 class="MH-lesson-subtitle" data-i18n="MH.lesson_Y1Alg_fonAff4.subtitle">Deepening â€“ squares, square roots and firstâ€‘degree equations</h2>
        
        <section class="MH-section">
            <h2 class="MH-section-title" data-i18n="MH.lesson_Y1Alg_fonAff4.introduction">Introduction</h2>
            <p data-i18n="MH.lesson_Y1Alg_fonAff4.introText1">In this fourth part we go further: expressions may contain squares or square roots, but after simplification they become affine functions. You will learn to recognise affine functions hidden inside more complex formulas, solve equations and inequalities, and interpret them graphically. Every step is explained in very simple terms.</p>
            <p data-i18n="MH.lesson_Y1Alg_fonAff4.introText2">We take care to break down every calculation â€“ no step is skipped. All answers are detailed for a modest level.</p>
        </section>

        <!-- ============== EXERCISE 1 ============== -->
        <section class="MH-section">
            <div class="MH-exercise-number" data-i18n="MH.lesson_Y1Alg_fonAff4.ex1.title">VIII. Exercise 1 â€“ Square that becomes affine</div>
            <div class="MH-important">
                <p data-i18n="MH.lesson_Y1Alg_fonAff4.ex1.statement">Let \(f(x) = (x+3)^2 - x^2\).<br>
                1) Expand and simplify. Show that \(f\) is an affine function (write it as \(ax+b\)).<br>
                2) What are the slope and the yâ€‘intercept?<br>
                3) Draw the graph of \(f\) for \(x\) between \(-3\) and \(3\).<br>
                4) Solve graphically and algebraically: \(f(x) = 6\).</p>
            </div>
            <div class="MH-canvas-container">
                <div class="MH-canvas-title" data-i18n="MH.lesson_Y1Alg_fonAff4.ex1.canvasTitle">Figure 1: Graph of f(x) = (x+3)Â² â€“ xÂ² = 6x + 9</div>
                <canvas id="ex1Canvas" width="600" height="400" class="MH-canvas"></canvas>
                <div class="MH-canvas-instructions" data-i18n="MH.lesson_Y1Alg_fonAff4.ex1.canvasInstructions">Straight line y = 6x+9, slope 6, intercept 9. Intersection with y=6 marked.</div>
            </div>
            <div class="MH-step">
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex1.q1">1) Simplify f(x)</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex1_sol1')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex1_sol1" class="MH-solution"></div>
                </div>
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex1.q2">2) Slope and intercept</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex1_sol2')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex1_sol2" class="MH-solution"></div>
                </div>
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex1.q3">3) Graph</h4>
                    <button class="MH-solution-btn" onclick="constructExercise1()" data-i18n="MH.lesson_Y1Alg_fonAff4.showConstruction">Show Construction</button>
                </div>
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex1.q4">4) Solve f(x)=6</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex1_sol4')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex1_sol4" class="MH-solution"></div>
                </div>
            </div>
        </section>

        <!-- ============== EXERCISE 2 ============== -->
        <section class="MH-section">
            <div class="MH-exercise-number" data-i18n="MH.lesson_Y1Alg_fonAff4.ex2.title">VIII. Exercise 2 â€“ Another square, zero and inequality</div>
            <div class="MH-important">
                <p data-i18n="MH.lesson_Y1Alg_fonAff4.ex2.statement">Let \(g(x) = (2x-1)^2 - 4x^2\).<br>
                1) Simplify \(g(x)\) to the form \(ax+b\). Is it affine?<br>
                2) Solve \(g(x) = 0\).<br>
                3) Solve \(g(x) \le 2\). Give the solution set in interval notation.<br>
                4) Draw the line representing \(g\) and highlight the part where \(g(x) \le 2\).</p>
            </div>
            <div class="MH-canvas-container">
                <div class="MH-canvas-title" data-i18n="MH.lesson_Y1Alg_fonAff4.ex2.canvasTitle">Figure 2: g(x) = â€“4x+1</div>
                <canvas id="ex2Canvas" width="600" height="400" class="MH-canvas"></canvas>
                <div class="MH-canvas-instructions" data-i18n="MH.lesson_Y1Alg_fonAff4.ex2.canvasInstructions">Line with negative slope, intercept 1. Region g(x) â‰¤ 2 shaded.</div>
            </div>
            <div class="MH-step">
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex2.q1">1) Simplify g(x)</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex2_sol1')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex2_sol1" class="MH-solution"></div>
                </div>
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex2.q2">2) Solve g(x)=0</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex2_sol2')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex2_sol2" class="MH-solution"></div>
                </div>
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex2.q3">3) Solve g(x) â‰¤ 2</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex2_sol3')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex2_sol3" class="MH-solution"></div>
                </div>
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex2.q4">4) Graph and highlight</h4>
                    <button class="MH-solution-btn" onclick="constructExercise2()" data-i18n="MH.lesson_Y1Alg_fonAff4.showConstruction">Show Construction</button>
                </div>
            </div>
        </section>

        <!-- ============== EXERCISE 3 ============== -->
        <section class="MH-section">
            <div class="MH-exercise-number" data-i18n="MH.lesson_Y1Alg_fonAff4.ex3.title">VIII. Exercise 3 â€“ Square root that simplifies</div>
            <div class="MH-important">
                <p data-i18n="MH.lesson_Y1Alg_fonAff4.ex3.statement">Let \(h(x) = \sqrt{(x+4)^2}\) for \(x \ge -4\).<br>
                1) Simplify \(h(x)\) (remember: \(\sqrt{t^2}=|t|\), but here \(x+4 \ge 0\) so \(|x+4| = x+4\)).<br>
                2) Is \(h\) an affine function? If yes, give its slope and intercept.<br>
                3) Solve \(h(x) = 7\).<br>
                4) Let \(k(x) = \sqrt{(2x+6)^2}\) for \(x \ge -3\). Write \(k\) as an affine function and solve \(k(x) = 4\).</p>
            </div>
            <div class="MH-canvas-container">
                <div class="MH-canvas-title" data-i18n="MH.lesson_Y1Alg_fonAff4.ex3.canvasTitle">Figure 3: h(x)=x+4 (for xâ‰¥â€“4) and k(x)=2x+6 (for xâ‰¥â€“3)</div>
                <canvas id="ex3Canvas" width="600" height="400" class="MH-canvas"></canvas>
                <div class="MH-canvas-instructions" data-i18n="MH.lesson_Y1Alg_fonAff4.ex3.canvasInstructions">Two affine functions obtained from square roots.</div>
            </div>
            <div class="MH-step">
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex3.q1">1) Simplify h(x)</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex3_sol1')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex3_sol1" class="MH-solution"></div>
                </div>
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex3.q2">2) Affine? Slope, intercept</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex3_sol2')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex3_sol2" class="MH-solution"></div>
                </div>
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex3.q3">3) Solve h(x)=7</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex3_sol3')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex3_sol3" class="MH-solution"></div>
                </div>
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex3.q4">4) k(x) and solve k(x)=4</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex3_sol4')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex3_sol4" class="MH-solution"></div>
                </div>
                <button class="MH-solution-btn" onclick="constructExercise3()" data-i18n="MH.lesson_Y1Alg_fonAff4.showConstruction">Show Construction</button>
            </div>
        </section>

        <!-- ============== EXERCISE 4 ============== -->
        <section class="MH-section">
            <div class="MH-exercise-number" data-i18n="MH.lesson_Y1Alg_fonAff4.ex4.title">VIII. Exercise 4 â€“ Two affine functions from squares</div>
            <div class="MH-important">
                <p data-i18n="MH.lesson_Y1Alg_fonAff4.ex4.statement">We consider \(f(x) = (x+5)^2 - (x-1)^2\) and \(g(x) = (2x+3)^2 - (2x-3)^2\).<br>
                1) Simplify each function. Show they are affine.<br>
                2) Find the coordinates of the intersection point of the two lines.<br>
                3) For which x is f(x) above g(x)? (i.e. f(x) â‰¥ g(x))</p>
            </div>
            <div class="MH-canvas-container">
                <div class="MH-canvas-title" data-i18n="MH.lesson_Y1Alg_fonAff4.ex4.canvasTitle">Figure 4: f(x)=12x+24, g(x)=24x</div>
                <canvas id="ex4Canvas" width="600" height="400" class="MH-canvas"></canvas>
                <div class="MH-canvas-instructions" data-i18n="MH.lesson_Y1Alg_fonAff4.ex4.canvasInstructions">Intersection at (â€“2, â€“48).</div>
            </div>
            <div class="MH-step">
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex4.q1">1) Simplify f and g</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex4_sol1')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex4_sol1" class="MH-solution"></div>
                </div>
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex4.q2">2) Intersection</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex4_sol2')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex4_sol2" class="MH-solution"></div>
                </div>
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex4.q3">3) f(x) â‰¥ g(x)</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex4_sol3')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex4_sol3" class="MH-solution"></div>
                </div>
                <button class="MH-solution-btn" onclick="constructExercise4()" data-i18n="MH.lesson_Y1Alg_fonAff4.showConstruction">Show Construction</button>
            </div>
        </section>

        <!-- ============== EXERCISE 5 ============== -->
        <section class="MH-section">
            <div class="MH-exercise-number" data-i18n="MH.lesson_Y1Alg_fonAff4.ex5.title">VIII. Exercise 5 â€“ Realâ€‘life: profit from sales</div>
            <div class="MH-important">
                <p data-i18n="MH.lesson_Y1Alg_fonAff4.ex5.statement">A small business sells handmade notebooks. The monthly profit (in D) is given by \(P(x) = (x+20)^2 - x^2\), where \(x\) is the number of notebooks sold.<br>
                1) Simplify \(P(x)\). What type of function is it?<br>
                2) Calculate the profit for 50 notebooks, then for 100 notebooks.<br>
                3) How many notebooks must be sold to obtain a profit of at least 1200 D? Solve an inequality.<br>
                4) Draw the graph of \(P(x)\) for \(0 \le x \le 100\) and interpret the slope.</p>
            </div>
            <div class="MH-canvas-container">
                <div class="MH-canvas-title" data-i18n="MH.lesson_Y1Alg_fonAff4.ex5.canvasTitle">Figure 5: Profit P(x) = 40x + 400</div>
                <canvas id="ex5Canvas" width="600" height="400" class="MH-canvas"></canvas>
                <div class="MH-canvas-instructions" data-i18n="MH.lesson_Y1Alg_fonAff4.ex5.canvasInstructions">Line with slope 40, intercept 400. Profit â‰¥ 1200 when x â‰¥ 20.</div>
            </div>
            <div class="MH-step">
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex5.q1">1) Simplify P(x)</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex5_sol1')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex5_sol1" class="MH-solution"></div>
                </div>
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex5.q2">2) Profit for 50, 100</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex5_sol2')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex5_sol2" class="MH-solution"></div>
                </div>
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex5.q3">3) Profit â‰¥ 1200</h4>
                    <button class="MH-solution-btn" onclick="toggleSolution('ex5_sol3')" data-i18n="MH.lesson_Y1Alg_fonAff4.showSolution">Show Solution</button>
                    <div id="ex5_sol3" class="MH-solution"></div>
                </div>
                <div class="MH-construction-step">
                    <h4 data-i18n="MH.lesson_Y1Alg_fonAff4.ex5.q4">4) Graph and slope</h4>
                    <button class="MH-solution-btn" onclick="constructExercise5()" data-i18n="MH.lesson_Y1Alg_fonAff4.showConstruction">Show Construction</button>
                </div>
            </div>
        </section>

        <section class="MH-section">
            <h2 class="MH-section-title" data-i18n="MH.lesson_Y1Alg_fonAff4.summary">Summary â€“ what we learned</h2>
            <div class="MH-important">
                <ul>
                    <li data-i18n="MH.lesson_Y1Alg_fonAff4.summary1">An expression like \((x+a)^2 - x^2\) always simplifies to an affine function: \(2ax + a^2\).</li>
                    <li data-i18n="MH.lesson_Y1Alg_fonAff4.summary2">\((ax+b)^2 - (cx+d)^2\) also becomes affine if the quadratic terms cancel.</li>
                    <li data-i18n="MH.lesson_Y1Alg_fonAff4.summary3">For a square root \(\sqrt{(linear)^2}\), if the linear expression is â‰¥ 0, it simplifies exactly to that linear expression (affine).</li>
                    <li data-i18n="MH.lesson_Y1Alg_fonAff4.summary4">We can solve equations and inequalities with these affine functions using the same rules as before.</li>
                    <li data-i18n="MH.lesson_Y1Alg_fonAff4.summary5">Real situations can be modelled by such hidden affine functions â€“ the slope gives the increase per unit.</li>
                </ul>
            </div>
        </section>
    </main>

    <footer>
        <div class="MH-footer-content">
            <div class="MH-footer-column">
                <div class="MH-footer-title" data-i18n="MH.footer.developer">Developer</div>
                <div class="MH-footer-text">Mejri Ziad</div>
            </div>
            <div class="MH-footer-column">
                <div class="MH-footer-title" data-i18n="MH.footer.version">Version</div>
                <div class="MH-footer-text">v0.0.2</div>
            </div>
            <div class="MH-footer-column">
                <div class="MH-footer-title" data-i18n="MH.footer.links">Links</div>
                <div class="MH-footer-links">
                    <a href="#" class="MH-footer-link" data-i18n="MH.footer.terms">Terms of Use</a>
                    <a href="#" class="MH-footer-link" data-i18n="MH.footer.privacy">Privacy Policy</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="scripts/katex.min.js"></script>
    <script src="scripts/auto-render.min.js"></script>
    <script src="scripts/geometry.js"></script>
    <script src="scripts/translation2.js"></script>
    <script>
        // =========================================================================
        // COMPLETE TRANSLATION OBJECT (EN, AR, FR) with String.raw for LaTeX
        // =========================================================================
        const fonAff4Translations = {
            en: {
                'MH.general.title': 'Mathematics Hub',
                'MH.general.theme': 'Theme',
                'MH.general.language': 'Language',
                'MH.general.enableNotifications': 'Enable Notifications',
                'MH.lesson_Y1Alg_fonAff4.showSolution': 'Show Solution',
                'MH.lesson_Y1Alg_fonAff4.hideSolution': 'Hide Solution',
                'MH.lesson_Y1Alg_fonAff4.showConstruction': 'Show Construction',
                'MH.lesson_Y1Alg_fonAff4.title': 'Affine Functions: Part IV',
                'MH.lesson_Y1Alg_fonAff4.subtitle': 'Deepening â€“ squares, square roots and firstâ€‘degree equations',
                'MH.lesson_Y1Alg_fonAff4.introduction': 'Introduction',
                'MH.lesson_Y1Alg_fonAff4.introText1': 'In this fourth part we go further: expressions may contain squares or square roots, but after simplification they become affine functions. You will learn to recognise affine functions hidden inside more complex formulas, solve equations and inequalities, and interpret them graphically. Every step is explained in very simple terms.',
                'MH.lesson_Y1Alg_fonAff4.introText2': 'We take care to break down every calculation â€“ no step is skipped. All answers are detailed for a modest level.',
                // Exercise 1
                'MH.lesson_Y1Alg_fonAff4.ex1.title': 'VIII. Exercise 1 â€“ Square that becomes affine',
                'MH.lesson_Y1Alg_fonAff4.ex1.statement': 'Let \\(f(x) = (x+3)^2 - x^2\\).<br>1) Expand and simplify. Show that \\(f\\) is an affine function (write it as \\(ax+b\\)).<br>2) What are the slope and the yâ€‘intercept?<br>3) Draw the graph of \\(f\\) for \\(x\\) between \\(-3\\) and \\(3\\).<br>4) Solve graphically and algebraically: \\(f(x) = 6\\).',
                'MH.lesson_Y1Alg_fonAff4.ex1.canvasTitle': 'Figure 1: Graph of f(x) = (x+3)Â² â€“ xÂ² = 6x + 9',
                'MH.lesson_Y1Alg_fonAff4.ex1.canvasInstructions': 'Straight line y = 6x+9, slope 6, intercept 9. Intersection with y=6 marked.',
                'MH.lesson_Y1Alg_fonAff4.ex1.q1': '1) Simplify f(x)',
                'MH.lesson_Y1Alg_fonAff4.ex1.q2': '2) Slope and intercept',
                'MH.lesson_Y1Alg_fonAff4.ex1.q3': '3) Graph',
                'MH.lesson_Y1Alg_fonAff4.ex1.q4': '4) Solve f(x)=6',
                // Exercise 2
                'MH.lesson_Y1Alg_fonAff4.ex2.title': 'VIII. Exercise 2 â€“ Another square, zero and inequality',
                'MH.lesson_Y1Alg_fonAff4.ex2.statement': 'Let \\(g(x) = (2x-1)^2 - 4x^2\\).<br>1) Simplify \\(g(x)\\) to the form \\(ax+b\\). Is it affine?<br>2) Solve \\(g(x) = 0\\).<br>3) Solve \\(g(x) \\le 2\\). Give the solution set in interval notation.<br>4) Draw the line representing \\(g\\) and highlight the part where \\(g(x) \\le 2\\).',
                'MH.lesson_Y1Alg_fonAff4.ex2.canvasTitle': 'Figure 2: g(x) = â€“4x+1',
                'MH.lesson_Y1Alg_fonAff4.ex2.canvasInstructions': 'Line with negative slope, intercept 1. Region g(x) â‰¤ 2 shaded.',
                'MH.lesson_Y1Alg_fonAff4.ex2.q1': '1) Simplify g(x)',
                'MH.lesson_Y1Alg_fonAff4.ex2.q2': '2) Solve g(x)=0',
                'MH.lesson_Y1Alg_fonAff4.ex2.q3': '3) Solve g(x) â‰¤ 2',
                'MH.lesson_Y1Alg_fonAff4.ex2.q4': '4) Graph and highlight',
                // Exercise 3
                'MH.lesson_Y1Alg_fonAff4.ex3.title': 'VIII. Exercise 3 â€“ Square root that simplifies',
                'MH.lesson_Y1Alg_fonAff4.ex3.statement': 'Let \\(h(x) = \\sqrt{(x+4)^2}\\) for \\(x \\ge -4\\).<br>1) Simplify \\(h(x)\\) (remember: \\(\\sqrt{t^2}=|t|\\), but here \\(x+4 \\ge 0\\) so \\(|x+4| = x+4\\)).<br>2) Is \\(h\\) an affine function? If yes, give its slope and intercept.<br>3) Solve \\(h(x) = 7\\).<br>4) Let \\(k(x) = \\sqrt{(2x+6)^2}\\) for \\(x \\ge -3\\). Write \\(k\\) as an affine function and solve \\(k(x) = 4\\).',
                'MH.lesson_Y1Alg_fonAff4.ex3.canvasTitle': 'Figure 3: h(x)=x+4 (for xâ‰¥â€“4) and k(x)=2x+6 (for xâ‰¥â€“3)',
                'MH.lesson_Y1Alg_fonAff4.ex3.canvasInstructions': 'Two affine functions obtained from square roots.',
                'MH.lesson_Y1Alg_fonAff4.ex3.q1': '1) Simplify h(x)',
                'MH.lesson_Y1Alg_fonAff4.ex3.q2': '2) Affine? Slope, intercept',
                'MH.lesson_Y1Alg_fonAff4.ex3.q3': '3) Solve h(x)=7',
                'MH.lesson_Y1Alg_fonAff4.ex3.q4': '4) k(x) and solve k(x)=4',
                // Exercise 4
                'MH.lesson_Y1Alg_fonAff4.ex4.title': 'VIII. Exercise 4 â€“ Two affine functions from squares',
                'MH.lesson_Y1Alg_fonAff4.ex4.statement': 'We consider \\(f(x) = (x+5)^2 - (x-1)^2\\) and \\(g(x) = (2x+3)^2 - (2x-3)^2\\).<br>1) Simplify each function. Show they are affine.<br>2) Find the coordinates of the intersection point of the two lines.<br>3) For which x is f(x) above g(x)? (i.e. f(x) â‰¥ g(x))',
                'MH.lesson_Y1Alg_fonAff4.ex4.canvasTitle': 'Figure 4: f(x)=12x+24, g(x)=24x',
                'MH.lesson_Y1Alg_fonAff4.ex4.canvasInstructions': 'Intersection at (â€“2, â€“48).',
                'MH.lesson_Y1Alg_fonAff4.ex4.q1': '1) Simplify f and g',
                'MH.lesson_Y1Alg_fonAff4.ex4.q2': '2) Intersection',
                'MH.lesson_Y1Alg_fonAff4.ex4.q3': '3) f(x) â‰¥ g(x)',
                // Exercise 5
                'MH.lesson_Y1Alg_fonAff4.ex5.title': 'VIII. Exercise 5 â€“ Realâ€‘life: profit from sales',
                'MH.lesson_Y1Alg_fonAff4.ex5.statement': 'A small business sells handmade notebooks. The monthly profit (in D) is given by \\(P(x) = (x+20)^2 - x^2\\), where \\(x\\) is the number of notebooks sold.<br>1) Simplify \\(P(x)\\). What type of function is it?<br>2) Calculate the profit for 50 notebooks, then for 100 notebooks.<br>3) How many notebooks must be sold to obtain a profit of at least 1200 D? Solve an inequality.<br>4) Draw the graph of \\(P(x)\\) for \\(0 \\le x \\le 100\\) and interpret the slope.',
                'MH.lesson_Y1Alg_fonAff4.ex5.canvasTitle': 'Figure 5: Profit P(x) = 40x + 400',
                'MH.lesson_Y1Alg_fonAff4.ex5.canvasInstructions': 'Line with slope 40, intercept 400. Profit â‰¥ 1200 when x â‰¥ 20.',
                'MH.lesson_Y1Alg_fonAff4.ex5.q1': '1) Simplify P(x)',
                'MH.lesson_Y1Alg_fonAff4.ex5.q2': '2) Profit for 50, 100',
                'MH.lesson_Y1Alg_fonAff4.ex5.q3': '3) Profit â‰¥ 1200',
                'MH.lesson_Y1Alg_fonAff4.ex5.q4': '4) Graph and slope',
                // Summary
                'MH.lesson_Y1Alg_fonAff4.summary': 'Summary â€“ what we learned',
                'MH.lesson_Y1Alg_fonAff4.summary1': 'An expression like \\((x+a)^2 - x^2\\) always simplifies to an affine function: \\(2ax + a^2\\).',
                'MH.lesson_Y1Alg_fonAff4.summary2': '\\((ax+b)^2 - (cx+d)^2\\) also becomes affine if the quadratic terms cancel.',
                'MH.lesson_Y1Alg_fonAff4.summary3': 'For a square root \\(\\sqrt{(linear)^2}\\), if the linear expression is â‰¥ 0, it simplifies exactly to that linear expression (affine).',
                'MH.lesson_Y1Alg_fonAff4.summary4': 'We can solve equations and inequalities with these affine functions using the same rules as before.',
                'MH.lesson_Y1Alg_fonAff4.summary5': 'Real situations can be modelled by such hidden affine functions â€“ the slope gives the increase per unit.',
                // Footer
                'MH.footer.developer': 'Developer',
                'MH.footer.version': 'Version',
                'MH.footer.links': 'Links',
                'MH.footer.terms': 'Terms of Use',
                'MH.footer.privacy': 'Privacy Policy',
                // ========= DETAILED SOLUTIONS (beginner-friendly, String.raw) =========
                'MH.lesson_Y1Alg_fonAff4.ex1.sol1': String.raw`<strong>Solution 1 â€“ Simplification:</strong> Expand \((x+3)^2 = x^2 + 6x + 9\). Then subtract \(x^2\): \(x^2+6x+9 - x^2 = 6x+9\). So \(f(x)=6x+9\). This is of the form \(ax+b\) with \(a=6, b=9\) â†’ affine function.`,
                'MH.lesson_Y1Alg_fonAff4.ex1.sol2': String.raw`<strong>Solution 2 â€“ Slope and intercept:</strong> For \(f(x)=6x+9\), the slope (coefficient of x) is \(6\), the yâ€‘intercept (constant term) is \(9\).`,
                'MH.lesson_Y1Alg_fonAff4.ex1.sol4': String.raw`<strong>Solution 4 â€“ Solve f(x)=6:</strong> \(6x+9 = 6\) â†’ \(6x = -3\) â†’ \(x = -0.5\). Graphically, the horizontal line y=6 meets the line at \(x=-0.5\).`,
                'MH.lesson_Y1Alg_fonAff4.ex2.sol1': String.raw`<strong>Solution 1 â€“ Simplify g(x):</strong> \((2x-1)^2 = 4x^2 -4x +1\). Subtract \(4x^2\): \(4x^2-4x+1-4x^2 = -4x+1\). So \(g(x)=-4x+1\), affine (slope -4, intercept 1).`,
                'MH.lesson_Y1Alg_fonAff4.ex2.sol2': String.raw`<strong>Solution 2 â€“ Solve g(x)=0:</strong> \(-4x+1=0\) â†’ \(1=4x\) â†’ \(x = \frac14 = 0.25\).`,
                'MH.lesson_Y1Alg_fonAff4.ex2.sol3': String.raw`<strong>Solution 3 â€“ Solve g(x) â‰¤ 2:</strong> \(-4x+1 \le 2\) â†’ subtract 1: \(-4x \le 1\) â†’ divide by -4 (reverse inequality): \(x \ge -\frac14\). In interval: \([-0.25, +\infty)\).`,
                'MH.lesson_Y1Alg_fonAff4.ex3.sol1': String.raw`<strong>Solution 1 â€“ Simplify h(x):</strong> \(\sqrt{(x+4)^2} = |x+4|\). Since domain \(x \ge -4\), \(x+4 \ge 0\) so \(|x+4| = x+4\). Thus \(h(x)=x+4\).`,
                'MH.lesson_Y1Alg_fonAff4.ex3.sol2': String.raw`<strong>Solution 2 â€“ Affine?</strong> Yes, \(h(x)=x+4\) is affine: slope \(1\), intercept \(4\).`,
                'MH.lesson_Y1Alg_fonAff4.ex3.sol3': String.raw`<strong>Solution 3 â€“ Solve h(x)=7:</strong> \(x+4 = 7\) â†’ \(x = 3\) (3 â‰¥ -4, valid).`,
                'MH.lesson_Y1Alg_fonAff4.ex3.sol4': String.raw`<strong>Solution 4 â€“ k(x):</strong> For \(x \ge -3\), \(2x+6 \ge 0\) so \(\sqrt{(2x+6)^2}=2x+6\). Affine, slope 2, intercept 6. Solve \(2x+6=4\) â†’ \(2x=-2\) â†’ \(x=-1\) (valid).`,
                'MH.lesson_Y1Alg_fonAff4.ex4.sol1': String.raw`<strong>Solution 1 â€“ Simplify f and g:</strong> \(f(x)=(x+5)^2-(x-1)^2 = (x^2+10x+25) - (x^2-2x+1) = 12x+24\). \(g(x)=(2x+3)^2-(2x-3)^2 = (4x^2+12x+9) - (4x^2-12x+9) = 24x\). Both affine.`,
                'MH.lesson_Y1Alg_fonAff4.ex4.sol2': String.raw`<strong>Solution 2 â€“ Intersection:</strong> \(f(x)=g(x)\) â†’ \(12x+24 = 24x\) â†’ \(24 = 12x\) â†’ \(x = 2\). Then \(y = 24Â·2 = 48\) (or \(12Â·2+24=48\)). Point \((2,48)\).`,
                'MH.lesson_Y1Alg_fonAff4.ex4.sol3': String.raw`<strong>Solution 3 â€“ f(x) â‰¥ g(x):</strong> \(12x+24 \ge 24x\) â†’ \(24 \ge 12x\) â†’ \(x \le 2\). So for \(x \le 2\), f is above or equal to g.`,
                'MH.lesson_Y1Alg_fonAff4.ex5.sol1': String.raw`<strong>Solution 1 â€“ Simplify P(x):</strong> \((x+20)^2 = x^2 + 40x + 400\). Subtract \(x^2\): \(P(x)=40x+400\). Affine function.`,
                'MH.lesson_Y1Alg_fonAff4.ex5.sol2': String.raw`<strong>Solution 2 â€“ Profit for 50, 100:</strong> \(P(50)=40Â·50+400 = 2000+400=2400\) D. \(P(100)=40Â·100+400=4000+400=4400\) D.`,
                'MH.lesson_Y1Alg_fonAff4.ex5.sol3': String.raw`<strong>Solution 3 â€“ Profit â‰¥ 1200:</strong> \(40x+400 \ge 1200\) â†’ \(40x \ge 800\) â†’ \(x \ge 20\). At least 20 notebooks.`,
            },
            ar: {
                // Arabic translations â€“ complete set
                'MH.general.title': 'Ù…Ø±ÙƒØ² Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª',
                'MH.general.theme': 'Ø§Ù„Ø³Ù…Ø©',
                'MH.general.language': 'Ø§Ù„Ù„ØºØ©',
                'MH.general.enableNotifications': 'ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª',
                'MH.lesson_Y1Alg_fonAff4.showSolution': 'Ø¹Ø±Ø¶ Ø§Ù„Ø­Ù„',
                'MH.lesson_Y1Alg_fonAff4.hideSolution': 'Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø­Ù„',
                'MH.lesson_Y1Alg_fonAff4.showConstruction': 'Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡',
                'MH.lesson_Y1Alg_fonAff4.title': 'Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ¢Ù„ÙÙŠØ©: Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø¹',
                'MH.lesson_Y1Alg_fonAff4.subtitle': 'ØªØ¹Ù…ÙŠÙ‚ â€“ Ù…Ø±Ø¨Ø¹Ø§ØªØŒ Ø¬Ø°ÙˆØ± ØªØ±Ø¨ÙŠØ¹ÙŠØ© ÙˆÙ…Ø¹Ø§Ø¯Ù„Ø§Øª Ø¯Ø±Ø¬Ø© Ø£ÙˆÙ„Ù‰',
                'MH.lesson_Y1Alg_fonAff4.introduction': 'Ù…Ù‚Ø¯Ù…Ø©',
                'MH.lesson_Y1Alg_fonAff4.introText1': 'ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ù†ØªØ¹Ù…Ù‚ Ø£ÙƒØ«Ø±: Ù‚Ø¯ ØªØ­ØªÙˆÙŠ Ø§Ù„Ø¹Ø¨Ø§Ø±Ø§Øª Ø¹Ù„Ù‰ Ù…Ø±Ø¨Ø¹Ø§Øª Ø£Ùˆ Ø¬Ø°ÙˆØ± ØªØ±Ø¨ÙŠØ¹ÙŠØ©ØŒ Ù„ÙƒÙ† Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¨Ø³ÙŠØ· ØªØµØ¨Ø­ Ø¯ÙˆØ§Ù„Ø§Ù‹ ØªØ¢Ù„ÙÙŠØ©. Ø³ØªØªØ¹Ù„Ù… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ¢Ù„ÙÙŠØ© Ø§Ù„Ù…Ø®Ø¨Ø£Ø© Ø¯Ø§Ø®Ù„ ØµÙŠØº Ø£ÙƒØ«Ø± ØªØ¹Ù‚ÙŠØ¯Ø§Ù‹ØŒ ÙˆØ­Ù„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª ÙˆØ§Ù„Ù…ØªØ±Ø§Ø¬Ø­Ø§ØªØŒ ÙˆØªÙØ³ÙŠØ±Ù‡Ø§ Ø¨ÙŠØ§Ù†ÙŠØ§Ù‹. ÙƒÙ„ Ø®Ø·ÙˆØ© Ù…Ø´Ø±ÙˆØ­Ø© Ø¨Ø£Ø³Ù„ÙˆØ¨ Ø¨Ø³ÙŠØ· Ø¬Ø¯Ø§Ù‹.',
                'MH.lesson_Y1Alg_fonAff4.introText2': 'Ù†Ø­Ø±Øµ Ø¹Ù„Ù‰ ØªÙØµÙŠÙ„ ÙƒÙ„ Ø¹Ù…Ù„ÙŠØ© Ø­Ø³Ø§Ø¨ÙŠØ© â€“ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø·ÙˆØ© Ù…Ø­Ø°ÙˆÙØ©. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù…ÙØµÙ„Ø© Ù„Ù…Ø³ØªÙˆÙ‰ Ù…Ø¨ØªØ¯Ø¦.',
                // Exercise 1
                'MH.lesson_Y1Alg_fonAff4.ex1.title': 'Ø«Ø§Ù…Ù†Ø§Ù‹: ØªÙ…Ø±ÙŠÙ† 1 â€“ Ù…Ø±Ø¨Ø¹ ÙŠØµØ¨Ø­ ØªØ¢Ù„ÙÙŠØ§Ù‹',
                'MH.lesson_Y1Alg_fonAff4.ex1.statement': 'Ù„ØªÙƒÙ† \\(f(x) = (x+3)^2 - x^2\\).<br>1) Ø§Ù†Ø´Ø± ÙˆØ¨Ø³Ø·. Ø¨ÙŠÙ‘Ù† Ø£Ù† \\(f\\) Ø¯Ø§Ù„Ø© ØªØ¢Ù„ÙÙŠØ© (Ø§ÙƒØªØ¨Ù‡Ø§ Ø¹Ù„Ù‰ Ø´ÙƒÙ„ \\(ax+b\\)).<br>2) Ù…Ø§ Ù‡Ù…Ø§ Ø§Ù„Ù…ÙŠÙ„ ÙˆØªÙ‚Ø§Ø·Ø¹ yØŸ<br>3) Ø§Ø±Ø³Ù… ØªÙ…Ø«ÙŠÙ„ \\(f\\) Ù„Ù€ \\(x\\) Ø¨ÙŠÙ† -3 Ùˆ3.<br>4) Ø­Ù„ Ø¨ÙŠØ§Ù†ÙŠØ§Ù‹ ÙˆØ¬Ø¨Ø±ÙŠØ§Ù‹: \\(f(x) = 6\\).',
                'MH.lesson_Y1Alg_fonAff4.ex1.canvasTitle': 'Ø§Ù„Ø´ÙƒÙ„ 1: ØªÙ…Ø«ÙŠÙ„ f(x) = (x+3)Â² â€“ xÂ² = 6x + 9',
                'MH.lesson_Y1Alg_fonAff4.ex1.canvasInstructions': 'Ù…Ø³ØªÙ‚ÙŠÙ… y = 6x+9ØŒ Ù…ÙŠÙ„Ù‡ 6ØŒ ÙˆØªÙ‚Ø§Ø·Ø¹ y = 9. Ø§Ù„ØªÙ‚Ø§Ø·Ø¹ Ù…Ø¹ y=6 Ù…Ø­Ø¯Ø¯.',
                'MH.lesson_Y1Alg_fonAff4.ex1.q1': '1) Ø¨Ø³Ø· f(x)',
                'MH.lesson_Y1Alg_fonAff4.ex1.q2': '2) Ø§Ù„Ù…ÙŠÙ„ ÙˆØ§Ù„ØªÙ‚Ø§Ø·Ø¹',
                'MH.lesson_Y1Alg_fonAff4.ex1.q3': '3) Ø§Ù„ØªÙ…Ø«ÙŠÙ„',
                'MH.lesson_Y1Alg_fonAff4.ex1.q4': '4) Ø­Ù„ f(x)=6',
                // Exercise 2
                'MH.lesson_Y1Alg_fonAff4.ex2.title': 'Ø«Ø§Ù…Ù†Ø§Ù‹: ØªÙ…Ø±ÙŠÙ† 2 â€“ Ù…Ø±Ø¨Ø¹ Ø¢Ø®Ø±ØŒ ØµÙØ± ÙˆÙ…ØªØ±Ø§Ø¬Ø­Ø©',
                'MH.lesson_Y1Alg_fonAff4.ex2.statement': 'Ù„ØªÙƒÙ† \\(g(x) = (2x-1)^2 - 4x^2\\).<br>1) Ø¨Ø³Ø· \\(g(x)\\) Ø¥Ù„Ù‰ \\(ax+b\\). Ù‡Ù„ Ù‡ÙŠ ØªØ¢Ù„ÙÙŠØ©ØŸ<br>2) Ø­Ù„ \\(g(x) = 0\\).<br>3) Ø­Ù„ \\(g(x) \\le 2\\). Ø£Ø¹Ø· Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø­Ù„ÙˆÙ„ Ø¨Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ø§Ù„ÙØªØ±Ø§Øª.<br>4) Ø§Ø±Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ø§Ù„Ø°ÙŠ ÙŠÙ…Ø«Ù„ \\(g\\) ÙˆÙ„ÙˆÙ‘Ù† Ø§Ù„Ø¬Ø²Ø¡ Ø­ÙŠØ« \\(g(x) \\le 2\\).',
                'MH.lesson_Y1Alg_fonAff4.ex2.canvasTitle': 'Ø§Ù„Ø´ÙƒÙ„ 2: g(x) = â€“4x+1',
                'MH.lesson_Y1Alg_fonAff4.ex2.canvasInstructions': 'Ù…Ø³ØªÙ‚ÙŠÙ… Ù…ÙŠÙ„Ù‡ Ø³Ø§Ù„Ø¨ØŒ ØªÙ‚Ø§Ø·Ø¹ 1. Ø§Ù„Ù…Ù†Ø·Ù‚Ø© g(x) â‰¤ 2 Ù…Ø¸Ù„Ù„Ø©.',
                'MH.lesson_Y1Alg_fonAff4.ex2.q1': '1) Ø¨Ø³Ø· g(x)',
                'MH.lesson_Y1Alg_fonAff4.ex2.q2': '2) Ø­Ù„ g(x)=0',
                'MH.lesson_Y1Alg_fonAff4.ex2.q3': '3) Ø­Ù„ g(x) â‰¤ 2',
                'MH.lesson_Y1Alg_fonAff4.ex2.q4': '4) Ø§Ù„ØªÙ…Ø«ÙŠÙ„ ÙˆØ§Ù„ØªÙ„ÙˆÙŠÙ†',
                // Exercise 3
                'MH.lesson_Y1Alg_fonAff4.ex3.title': 'Ø«Ø§Ù…Ù†Ø§Ù‹: ØªÙ…Ø±ÙŠÙ† 3 â€“ Ø¬Ø°Ø± ØªØ±Ø¨ÙŠØ¹ÙŠ ÙŠØ¨Ø³Ø·',
                'MH.lesson_Y1Alg_fonAff4.ex3.statement': 'Ù„ØªÙƒÙ† \\(h(x) = \\sqrt{(x+4)^2}\\) Ù…Ù† Ø£Ø¬Ù„ \\(x \\ge -4\\).<br>1) Ø¨Ø³Ø· \\(h(x)\\) (ØªØ°ÙƒØ±: \\(\\sqrt{t^2}=|t|\\)ØŒ Ù„ÙƒÙ† Ù‡Ù†Ø§ \\(x+4 \\ge 0\\) Ù„Ø°Ø§ \\(|x+4| = x+4\\)).<br>2) Ù‡Ù„ \\(h\\) Ø¯Ø§Ù„Ø© ØªØ¢Ù„ÙÙŠØ©ØŸ Ø¥Ø°Ø§ Ù†Ø¹Ù…ØŒ Ø£Ø¹Ø· Ø§Ù„Ù…ÙŠÙ„ ÙˆØ§Ù„ØªÙ‚Ø§Ø·Ø¹.<br>3) Ø­Ù„ \\(h(x) = 7\\).<br>4) Ù„ØªÙƒÙ† \\(k(x) = \\sqrt{(2x+6)^2}\\) Ù…Ù† Ø£Ø¬Ù„ \\(x \\ge -3\\). Ø§ÙƒØªØ¨ \\(k\\) ÙƒØ¯Ø§Ù„Ø© ØªØ¢Ù„ÙÙŠØ© ÙˆØ­Ù„ \\(k(x) = 4\\).',
                'MH.lesson_Y1Alg_fonAff4.ex3.canvasTitle': 'Ø§Ù„Ø´ÙƒÙ„ 3: h(x)=x+4 (Ù…Ù† Ø£Ø¬Ù„ xâ‰¥â€“4) Ùˆ k(x)=2x+6 (Ù…Ù† Ø£Ø¬Ù„ xâ‰¥â€“3)',
                'MH.lesson_Y1Alg_fonAff4.ex3.canvasInstructions': 'Ø¯Ø§Ù„ØªØ§Ù† ØªØ¢Ù„ÙÙŠØªØ§Ù† Ù†Ø§ØªØ¬ØªØ§Ù† Ù…Ù† Ø§Ù„Ø¬Ø°ÙˆØ± Ø§Ù„ØªØ±Ø¨ÙŠØ¹ÙŠØ©.',
                'MH.lesson_Y1Alg_fonAff4.ex3.q1': '1) Ø¨Ø³Ø· h(x)',
                'MH.lesson_Y1Alg_fonAff4.ex3.q2': '2) ØªØ¢Ù„ÙÙŠØ©ØŸ Ø§Ù„Ù…ÙŠÙ„ ÙˆØ§Ù„ØªÙ‚Ø§Ø·Ø¹',
                'MH.lesson_Y1Alg_fonAff4.ex3.q3': '3) Ø­Ù„ h(x)=7',
                'MH.lesson_Y1Alg_fonAff4.ex3.q4': '4) k(x) ÙˆØ­Ù„ k(x)=4',
                // Exercise 4
                'MH.lesson_Y1Alg_fonAff4.ex4.title': 'Ø«Ø§Ù…Ù†Ø§Ù‹: ØªÙ…Ø±ÙŠÙ† 4 â€“ Ø¯Ø§Ù„ØªØ§Ù† ØªØ¢Ù„ÙÙŠØªØ§Ù† Ù…Ù† Ù…Ø±Ø¨Ø¹Ø§Øª',
                'MH.lesson_Y1Alg_fonAff4.ex4.statement': 'Ù†Ø¹ØªØ¨Ø± \\(f(x) = (x+5)^2 - (x-1)^2\\) Ùˆ \\(g(x) = (2x+3)^2 - (2x-3)^2\\).<br>1) Ø¨Ø³Ø· ÙƒÙ„ Ø¯Ø§Ù„Ø©. Ø¨ÙŠÙ‘Ù† Ø£Ù†Ù‡Ù…Ø§ ØªØ¢Ù„ÙÙŠØªØ§Ù†.<br>2) Ø¬Ø¯ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ù†Ù‚Ø·Ø© ØªÙ‚Ø§Ø·Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…ÙŠÙ†.<br>3) Ù…Ù† Ø£Ø¬Ù„ Ø£ÙŠ x ÙŠÙƒÙˆÙ† f(x) ÙÙˆÙ‚ g(x)ØŸ (Ø£ÙŠ f(x) â‰¥ g(x))',
                'MH.lesson_Y1Alg_fonAff4.ex4.canvasTitle': 'Ø§Ù„Ø´ÙƒÙ„ 4: f(x)=12x+24ØŒ g(x)=24x',
                'MH.lesson_Y1Alg_fonAff4.ex4.canvasInstructions': 'Ø§Ù„ØªÙ‚Ø§Ø·Ø¹ Ø¹Ù†Ø¯ (â€“2, â€“48).',
                'MH.lesson_Y1Alg_fonAff4.ex4.q1': '1) Ø¨Ø³Ø· f Ùˆ g',
                'MH.lesson_Y1Alg_fonAff4.ex4.q2': '2) Ù†Ù‚Ø·Ø© Ø§Ù„ØªÙ‚Ø§Ø·Ø¹',
                'MH.lesson_Y1Alg_fonAff4.ex4.q3': '3) f(x) â‰¥ g(x)',
                // Exercise 5
                'MH.lesson_Y1Alg_fonAff4.ex5.title': 'Ø«Ø§Ù…Ù†Ø§Ù‹: ØªÙ…Ø±ÙŠÙ† 5 â€“ ÙˆØ§Ù‚Ø¹ÙŠ: Ø§Ù„Ø±Ø¨Ø­ Ù…Ù† Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',
                'MH.lesson_Y1Alg_fonAff4.ex5.statement': 'Ù…Ø´Ø±ÙˆØ¹ ØµØºÙŠØ± ÙŠØ¨ÙŠØ¹ Ø¯ÙØ§ØªØ± ÙŠØ¯ÙˆÙŠØ© Ø§Ù„ØµÙ†Ø¹. Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ø´Ù‡Ø±ÙŠ (Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ø±) ÙŠÙØ¹Ø·Ù‰ Ø¨Ø§Ù„Ø¯Ø§Ù„Ø© \\(P(x) = (x+20)^2 - x^2\\)ØŒ Ø­ÙŠØ« \\(x\\) Ù‡Ùˆ Ø¹Ø¯Ø¯ Ø§Ù„Ø¯ÙØ§ØªØ± Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©.<br>1) Ø¨Ø³Ø· \\(P(x)\\). Ù…Ø§ Ù†ÙˆØ¹ Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø©ØŸ<br>2) Ø§Ø­Ø³Ø¨ Ø§Ù„Ø±Ø¨Ø­ Ù„Ù€ 50 Ø¯ÙØªØ±Ø§Ù‹ØŒ Ø«Ù… Ù„Ù€ 100 Ø¯ÙØªØ±.<br>3) ÙƒÙ… Ø¯ÙØªØ±Ø§Ù‹ ÙŠØ¬Ø¨ Ø¨ÙŠØ¹Ù‡ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ø¨Ø­ Ù„Ø§ ÙŠÙ‚Ù„ Ø¹Ù† 1200 Ø¯ÙŠÙ†Ø§Ø±ØŸ Ø­Ù„ Ù…ØªØ±Ø§Ø¬Ø­Ø©.<br>4) Ø§Ø±Ø³Ù… ØªÙ…Ø«ÙŠÙ„ \\(P(x)\\) Ù…Ù† Ø£Ø¬Ù„ \\(0 \\le x \\le 100\\) ÙˆÙØ³Ø± Ø§Ù„Ù…ÙŠÙ„.',
                'MH.lesson_Y1Alg_fonAff4.ex5.canvasTitle': 'Ø§Ù„Ø´ÙƒÙ„ 5: Ø§Ù„Ø±Ø¨Ø­ P(x) = 40x + 400',
                'MH.lesson_Y1Alg_fonAff4.ex5.canvasInstructions': 'Ù…Ø³ØªÙ‚ÙŠÙ… Ù…ÙŠÙ„Ù‡ 40ØŒ ÙˆØªÙ‚Ø§Ø·Ø¹ 400. Ø§Ù„Ø±Ø¨Ø­ â‰¥ 1200 Ø¹Ù†Ø¯Ù…Ø§ x â‰¥ 20.',
                'MH.lesson_Y1Alg_fonAff4.ex5.q1': '1) Ø¨Ø³Ø· P(x)',
                'MH.lesson_Y1Alg_fonAff4.ex5.q2': '2) Ø§Ù„Ø±Ø¨Ø­ Ù„Ù€ 50ØŒ 100',
                'MH.lesson_Y1Alg_fonAff4.ex5.q3': '3) Ø§Ù„Ø±Ø¨Ø­ â‰¥ 1200',
                'MH.lesson_Y1Alg_fonAff4.ex5.q4': '4) Ø§Ù„ØªÙ…Ø«ÙŠÙ„ ÙˆØ§Ù„Ù…ÙŠÙ„',
                // Summary
                'MH.lesson_Y1Alg_fonAff4.summary': 'Ù…Ù„Ø®Øµ â€“ Ù…Ø§ ØªØ¹Ù„Ù…Ù†Ø§Ù‡',
                'MH.lesson_Y1Alg_fonAff4.summary1': 'Ø¹Ø¨Ø§Ø±Ø© Ù…Ø«Ù„ \\((x+a)^2 - x^2\\) ØªØ¨Ø³Ø· Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø¥Ù„Ù‰ Ø¯Ø§Ù„Ø© ØªØ¢Ù„ÙÙŠØ©: \\(2ax + a^2\\).',
                'MH.lesson_Y1Alg_fonAff4.summary2': '\\((ax+b)^2 - (cx+d)^2\\) ØªØµØ¨Ø­ ØªØ¢Ù„ÙÙŠØ© Ø£ÙŠØ¶Ø§Ù‹ Ø¥Ø°Ø§ Ø£Ù„ØºÙŠØª Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„ØªØ±Ø¨ÙŠØ¹ÙŠØ©.',
                'MH.lesson_Y1Alg_fonAff4.summary3': 'Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù„Ø¬Ø°Ø± Ø§Ù„ØªØ±Ø¨ÙŠØ¹ÙŠ \\(\\sqrt{(linear)^2}\\)ØŒ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© Ø§Ù„Ø®Ø·ÙŠØ© â‰¥ 0ØŒ ØªØ¨Ø³Ø· Ø¥Ù„Ù‰ ØªÙ„Ùƒ Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© Ø§Ù„Ø®Ø·ÙŠØ© (ØªØ¢Ù„ÙÙŠØ©).',
                'MH.lesson_Y1Alg_fonAff4.summary4': 'ÙŠÙ…ÙƒÙ†Ù†Ø§ Ø­Ù„ Ù…Ø¹Ø§Ø¯Ù„Ø§Øª ÙˆÙ…ØªØ±Ø§Ø¬Ø­Ø§Øª Ø¨Ù‡Ø°Ù‡ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ¢Ù„ÙÙŠØ© Ø¨Ø§Ø³ØªØ¹Ù…Ø§Ù„ Ù†ÙØ³ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©.',
                'MH.lesson_Y1Alg_fonAff4.summary5': 'ÙŠÙ…ÙƒÙ† Ù†Ù…Ø°Ø¬Ø© Ù…ÙˆØ§Ù‚Ù Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø¨Ù‡Ø°Ù‡ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ¢Ù„ÙÙŠØ© Ø§Ù„Ù…Ø®Ø¨Ø£Ø© â€“ Ø§Ù„Ù…ÙŠÙ„ ÙŠØ¹Ø·ÙŠ Ø§Ù„Ø²ÙŠØ§Ø¯Ø© Ù„ÙƒÙ„ ÙˆØ­Ø¯Ø©.',
                // Footer
                'MH.footer.developer': 'Ø§Ù„Ù…Ø·ÙˆØ±',
                'MH.footer.version': 'Ø§Ù„Ø¥ØµØ¯Ø§Ø±',
                'MH.footer.links': 'Ø±ÙˆØ§Ø¨Ø·',
                'MH.footer.terms': 'Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…',
                'MH.footer.privacy': 'Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©',
                // Arabic detailed solutions (String.raw)
                'MH.lesson_Y1Alg_fonAff4.ex1.sol1': String.raw`<strong>Ø§Ù„Ø­Ù„ 1 â€“ Ø§Ù„ØªØ¨Ø³ÙŠØ·:</strong> \((x+3)^2 = x^2 + 6x + 9\)ØŒ Ù†Ø·Ø±Ø­ \(x^2\): \(x^2+6x+9 - x^2 = 6x+9\). Ø¥Ø°Ù† \(f(x)=6x+9\). Ù‡Ø°Ù‡ Ù…Ù† Ø§Ù„Ø´ÙƒÙ„ \(ax+b\) Ø­ÙŠØ« \(a=6, b=9\) â†’ Ø¯Ø§Ù„Ø© ØªØ¢Ù„ÙÙŠØ©.`,
                'MH.lesson_Y1Alg_fonAff4.ex1.sol2': String.raw`<strong>Ø§Ù„Ù…ÙŠÙ„ ÙˆØ§Ù„ØªÙ‚Ø§Ø·Ø¹:</strong> \(f(x)=6x+9\)ØŒ Ø§Ù„Ù…ÙŠÙ„ = 6ØŒ ØªÙ‚Ø§Ø·Ø¹ y = 9.`,
                'MH.lesson_Y1Alg_fonAff4.ex1.sol4': String.raw`<strong>Ø­Ù„ f(x)=6:</strong> \(6x+9 = 6\) â†’ \(6x = -3\) â†’ \(x = -0.5\).`,
                'MH.lesson_Y1Alg_fonAff4.ex2.sol1': String.raw`<strong>Ø§Ù„Ø­Ù„ 1 â€“ ØªØ¨Ø³ÙŠØ· g(x):</strong> \((2x-1)^2 = 4x^2 -4x +1\)ØŒ Ù†Ø·Ø±Ø­ \(4x^2\): \(4x^2-4x+1-4x^2 = -4x+1\). Ø¥Ø°Ù† \(g(x)=-4x+1\)ØŒ ØªØ¢Ù„ÙÙŠØ© (Ù…ÙŠÙ„ -4ØŒ ØªÙ‚Ø§Ø·Ø¹ 1).`,
                'MH.lesson_Y1Alg_fonAff4.ex2.sol2': String.raw`<strong>Ø­Ù„ g(x)=0:</strong> \(-4x+1=0\) â†’ \(1=4x\) â†’ \(x = \frac14 = 0.25\).`,
                'MH.lesson_Y1Alg_fonAff4.ex2.sol3': String.raw`<strong>Ø­Ù„ g(x) â‰¤ 2:</strong> \(-4x+1 \le 2\) â†’ Ù†Ø·Ø±Ø­ 1: \(-4x \le 1\) â†’ Ù†Ù‚Ø³Ù… Ø¹Ù„Ù‰ -4 (Ù†Ø¹ÙƒØ³ Ø§Ù„Ù…ØªØ±Ø§Ø¬Ø­Ø©): \(x \ge -\frac14\). Ø¨Ø§Ù„ÙØªØ±Ø§Øª: \([-0.25, +\infty)\).`,
                'MH.lesson_Y1Alg_fonAff4.ex3.sol1': String.raw`<strong>Ø§Ù„Ø­Ù„ 1 â€“ ØªØ¨Ø³ÙŠØ· h(x):</strong> \(\sqrt{(x+4)^2} = |x+4|\). Ø¨Ù…Ø§ Ø£Ù† Ø§Ù„Ù…Ø¬Ø§Ù„ \(x \ge -4\)ØŒ \(x+4 \ge 0\) Ø¥Ø°Ù† \(|x+4| = x+4\). Ø¥Ø°Ø§Ù‹ \(h(x)=x+4\).`,
                'MH.lesson_Y1Alg_fonAff4.ex3.sol2': String.raw`<strong>Ù‡Ù„ h ØªØ¢Ù„ÙÙŠØ©ØŸ</strong> Ù†Ø¹Ù…ØŒ \(h(x)=x+4\) ØªØ¢Ù„ÙÙŠØ©: Ø§Ù„Ù…ÙŠÙ„ \(1\)ØŒ Ø§Ù„ØªÙ‚Ø§Ø·Ø¹ \(4\).`,
                'MH.lesson_Y1Alg_fonAff4.ex3.sol3': String.raw`<strong>Ø­Ù„ h(x)=7:</strong> \(x+4 = 7\) â†’ \(x = 3\) (3 â‰¥ -4ØŒ Ù…Ù‚Ø¨ÙˆÙ„).`,
                'MH.lesson_Y1Alg_fonAff4.ex3.sol4': String.raw`<strong>k(x):</strong> Ù…Ù† Ø£Ø¬Ù„ \(x \ge -3\)ØŒ \(2x+6 \ge 0\) Ø¥Ø°Ù† \(\sqrt{(2x+6)^2}=2x+6\). ØªØ¢Ù„ÙÙŠØ©ØŒ Ù…ÙŠÙ„ 2ØŒ ØªÙ‚Ø§Ø·Ø¹ 6. Ø­Ù„ \(2x+6=4\) â†’ \(2x=-2\) â†’ \(x=-1\) (Ù…Ù‚Ø¨ÙˆÙ„).`,
                'MH.lesson_Y1Alg_fonAff4.ex4.sol1': String.raw`<strong>Ø§Ù„Ø­Ù„ 1 â€“ ØªØ¨Ø³ÙŠØ· f Ùˆ g:</strong> \(f(x)=(x+5)^2-(x-1)^2 = (x^2+10x+25) - (x^2-2x+1) = 12x+24\). \(g(x)=(2x+3)^2-(2x-3)^2 = (4x^2+12x+9) - (4x^2-12x+9) = 24x\). ÙƒÙ„Ø§Ù‡Ù…Ø§ ØªØ¢Ù„ÙÙŠ.`,
                'MH.lesson_Y1Alg_fonAff4.ex4.sol2': String.raw`<strong>Ù†Ù‚Ø·Ø© Ø§Ù„ØªÙ‚Ø§Ø·Ø¹:</strong> \(f(x)=g(x)\) â†’ \(12x+24 = 24x\) â†’ \(24 = 12x\) â†’ \(x = 2\). Ø«Ù… \(y = 24Â·2 = 48\) (Ø£Ùˆ \(12Â·2+24=48\)). Ø§Ù„Ù†Ù‚Ø·Ø© \((2,48)\).`,
                'MH.lesson_Y1Alg_fonAff4.ex4.sol3': String.raw`<strong>f(x) â‰¥ g(x):</strong> \(12x+24 \ge 24x\) â†’ \(24 \ge 12x\) â†’ \(x \le 2\). Ø¥Ø°Ù† Ù…Ù† Ø£Ø¬Ù„ \(x \le 2\)ØŒ f ÙÙˆÙ‚ Ø£Ùˆ ØªØ³Ø§ÙˆÙŠ g.`,
                'MH.lesson_Y1Alg_fonAff4.ex5.sol1': String.raw`<strong>Ø§Ù„Ø­Ù„ 1 â€“ ØªØ¨Ø³ÙŠØ· P(x):</strong> \((x+20)^2 = x^2 + 40x + 400\)ØŒ Ù†Ø·Ø±Ø­ \(x^2\): \(P(x)=40x+400\). Ø¯Ø§Ù„Ø© ØªØ¢Ù„ÙÙŠØ©.`,
                'MH.lesson_Y1Alg_fonAff4.ex5.sol2': String.raw`<strong>Ø§Ù„Ø±Ø¨Ø­ Ù„Ù€ 50 Ùˆ 100:</strong> \(P(50)=40Â·50+400 = 2000+400=2400\) Ø¯ÙŠÙ†Ø§Ø±. \(P(100)=40Â·100+400=4000+400=4400\) Ø¯ÙŠÙ†Ø§Ø±.`,
                'MH.lesson_Y1Alg_fonAff4.ex5.sol3': String.raw`<strong>Ø§Ù„Ø±Ø¨Ø­ â‰¥ 1200:</strong> \(40x+400 \ge 1200\) â†’ \(40x \ge 800\) â†’ \(x \ge 20\). ÙŠØ¬Ø¨ Ø¨ÙŠØ¹ 20 Ø¯ÙØªØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.`,
            },
            fr: {
                // French translations â€“ complete set
                'MH.general.title': 'Mathematics Hub',
                'MH.general.theme': 'ThÃ¨me',
                'MH.general.language': 'Langue',
                'MH.general.enableNotifications': 'Activer les notifications',
                'MH.lesson_Y1Alg_fonAff4.showSolution': 'Afficher la solution',
                'MH.lesson_Y1Alg_fonAff4.hideSolution': 'Masquer la solution',
                'MH.lesson_Y1Alg_fonAff4.showConstruction': 'Afficher la construction',
                'MH.lesson_Y1Alg_fonAff4.title': 'Fonctions affines : Partie IV',
                'MH.lesson_Y1Alg_fonAff4.subtitle': 'Approfondissement â€“ carrÃ©s, racines carrÃ©es et Ã©quations du 1er degrÃ©',
                'MH.lesson_Y1Alg_fonAff4.introduction': 'Introduction',
                'MH.lesson_Y1Alg_fonAff4.introText1': 'Dans cette quatriÃ¨me partie, nous allons plus loin : les expressions peuvent contenir des carrÃ©s ou des racines carrÃ©es, mais aprÃ¨s simplification elles deviennent des fonctions affines. Vous apprendrez Ã  reconnaÃ®tre les fonctions affines cachÃ©es dans des formules complexes, Ã  rÃ©soudre Ã©quations et inÃ©quations, et Ã  les interprÃ©ter graphiquement. Chaque Ã©tape est expliquÃ©e trÃ¨s simplement.',
                'MH.lesson_Y1Alg_fonAff4.introText2': 'Nous prenons soin de dÃ©tailler chaque calcul â€“ aucune Ã©tape nâ€™est sautÃ©e. Toutes les rÃ©ponses sont dÃ©taillÃ©es pour un niveau modeste.',
                // Exercise 1
                'MH.lesson_Y1Alg_fonAff4.ex1.title': 'VIII. Exercice 1 â€“ Un carrÃ© qui devient affine',
                'MH.lesson_Y1Alg_fonAff4.ex1.statement': 'Soit \\(f(x) = (x+3)^2 - x^2\\).<br>1) DÃ©velopper et rÃ©duire. Montrer que \\(f\\) est une fonction affine (lâ€™Ã©crire sous la forme \\(ax+b\\)).<br>2) Quels sont le coefficient directeur et lâ€™ordonnÃ©e Ã  lâ€™origine ?<br>3) Tracer la reprÃ©sentation graphique de \\(f\\) pour \\(x\\) entre \\(-3\\) et \\(3\\).<br>4) RÃ©soudre graphiquement puis par le calcul : \\(f(x) = 6\\).',
                'MH.lesson_Y1Alg_fonAff4.ex1.canvasTitle': 'Figure 1 : Graphe de f(x) = (x+3)Â² â€“ xÂ² = 6x + 9',
                'MH.lesson_Y1Alg_fonAff4.ex1.canvasInstructions': 'Droite y = 6x+9, pente 6, ordonnÃ©e 9. Intersection avec y=6 marquÃ©e.',
                'MH.lesson_Y1Alg_fonAff4.ex1.q1': '1) Simplifier f(x)',
                'MH.lesson_Y1Alg_fonAff4.ex1.q2': '2) Pente et ordonnÃ©e',
                'MH.lesson_Y1Alg_fonAff4.ex1.q3': '3) TracÃ©',
                'MH.lesson_Y1Alg_fonAff4.ex1.q4': '4) RÃ©soudre f(x)=6',
                // Exercise 2
                'MH.lesson_Y1Alg_fonAff4.ex2.title': 'VIII. Exercice 2 â€“ Un autre carrÃ©, zÃ©ro et inÃ©quation',
                'MH.lesson_Y1Alg_fonAff4.ex2.statement': 'Soit \\(g(x) = (2x-1)^2 - 4x^2\\).<br>1) Simplifier \\(g(x)\\) sous la forme \\(ax+b\\). Est-elle affine ?<br>2) RÃ©soudre \\(g(x) = 0\\).<br>3) RÃ©soudre \\(g(x) \\le 2\\). Donner lâ€™ensemble solution avec des intervalles.<br>4) Tracer la droite reprÃ©sentant \\(g\\) et colorier la partie oÃ¹ \\(g(x) \\le 2\\).',
                'MH.lesson_Y1Alg_fonAff4.ex2.canvasTitle': 'Figure 2 : g(x) = â€“4x+1',
                'MH.lesson_Y1Alg_fonAff4.ex2.canvasInstructions': 'Droite de pente nÃ©gative, ordonnÃ©e 1. RÃ©gion g(x) â‰¤ 2 ombrÃ©e.',
                'MH.lesson_Y1Alg_fonAff4.ex2.q1': '1) Simplifier g(x)',
                'MH.lesson_Y1Alg_fonAff4.ex2.q2': '2) RÃ©soudre g(x)=0',
                'MH.lesson_Y1Alg_fonAff4.ex2.q3': '3) RÃ©soudre g(x) â‰¤ 2',
                'MH.lesson_Y1Alg_fonAff4.ex2.q4': '4) TracÃ© et coloriage',
                // Exercise 3
                'MH.lesson_Y1Alg_fonAff4.ex3.title': 'VIII. Exercice 3 â€“ Racine carrÃ©e qui se simplifie',
                'MH.lesson_Y1Alg_fonAff4.ex3.statement': 'Soit \\(h(x) = \\sqrt{(x+4)^2}\\) pour \\(x \\ge -4\\).<br>1) Simplifier \\(h(x)\\) (rappel : \\(\\sqrt{t^2}=|t|\\), mais ici \\(x+4 \\ge 0\\) donc \\(|x+4| = x+4\\)).<br>2) \\(h\\) est-elle affine ? Si oui, donner sa pente et son ordonnÃ©e.<br>3) RÃ©soudre \\(h(x) = 7\\).<br>4) Soit \\(k(x) = \\sqrt{(2x+6)^2}\\) pour \\(x \\ge -3\\). Ã‰crire \\(k\\) comme fonction affine et rÃ©soudre \\(k(x) = 4\\).',
                'MH.lesson_Y1Alg_fonAff4.ex3.canvasTitle': 'Figure 3 : h(x)=x+4 (pour xâ‰¥â€“4) et k(x)=2x+6 (pour xâ‰¥â€“3)',
                'MH.lesson_Y1Alg_fonAff4.ex3.canvasInstructions': 'Deux fonctions affines obtenues Ã  partir de racines carrÃ©es.',
                'MH.lesson_Y1Alg_fonAff4.ex3.q1': '1) Simplifier h(x)',
                'MH.lesson_Y1Alg_fonAff4.ex3.q2': '2) Affine ? Pente, ordonnÃ©e',
                'MH.lesson_Y1Alg_fonAff4.ex3.q3': '3) RÃ©soudre h(x)=7',
                'MH.lesson_Y1Alg_fonAff4.ex3.q4': '4) k(x) et rÃ©soudre k(x)=4',
                // Exercise 4
                'MH.lesson_Y1Alg_fonAff4.ex4.title': 'VIII. Exercice 4 â€“ Deux fonctions affines issues de carrÃ©s',
                'MH.lesson_Y1Alg_fonAff4.ex4.statement': 'On considÃ¨re \\(f(x) = (x+5)^2 - (x-1)^2\\) et \\(g(x) = (2x+3)^2 - (2x-3)^2\\).<br>1) Simplifier chaque fonction. Montrer quâ€™elles sont affines.<br>2) Trouver les coordonnÃ©es du point dâ€™intersection des deux droites.<br>3) Pour quels x a-t-on f(x) au-dessus de g(x) ? (câ€™est-Ã -dire f(x) â‰¥ g(x))',
                'MH.lesson_Y1Alg_fonAff4.ex4.canvasTitle': 'Figure 4 : f(x)=12x+24, g(x)=24x',
                'MH.lesson_Y1Alg_fonAff4.ex4.canvasInstructions': 'Intersection en (â€“2, â€“48).',
                'MH.lesson_Y1Alg_fonAff4.ex4.q1': '1) Simplifier f et g',
                'MH.lesson_Y1Alg_fonAff4.ex4.q2': '2) Intersection',
                'MH.lesson_Y1Alg_fonAff4.ex4.q3': '3) f(x) â‰¥ g(x)',
                // Exercise 5
                'MH.lesson_Y1Alg_fonAff4.ex5.title': 'VIII. Exercice 5 â€“ RÃ©el : bÃ©nÃ©fice de ventes',
                'MH.lesson_Y1Alg_fonAff4.ex5.statement': 'Une petite entreprise vend des cahiers faits main. Le bÃ©nÃ©fice mensuel (en D) est donnÃ© par \\(P(x) = (x+20)^2 - x^2\\), oÃ¹ \\(x\\) est le nombre de cahiers vendus.<br>1) Simplifier \\(P(x)\\). De quel type de fonction sâ€™agit-il ?<br>2) Calculer le bÃ©nÃ©fice pour 50 cahiers, puis pour 100 cahiers.<br>3) Combien de cahiers faut-il vendre pour obtenir un bÃ©nÃ©fice dâ€™au moins 1200 D ? RÃ©soudre une inÃ©quation.<br>4) Tracer la reprÃ©sentation graphique de \\(P(x)\\) pour \\(0 \\le x \\le 100\\) et interprÃ©ter la pente.',
                'MH.lesson_Y1Alg_fonAff4.ex5.canvasTitle': 'Figure 5 : BÃ©nÃ©fice P(x) = 40x + 400',
                'MH.lesson_Y1Alg_fonAff4.ex5.canvasInstructions': 'Droite de pente 40, ordonnÃ©e 400. BÃ©nÃ©fice â‰¥ 1200 quand x â‰¥ 20.',
                'MH.lesson_Y1Alg_fonAff4.ex5.q1': '1) Simplifier P(x)',
                'MH.lesson_Y1Alg_fonAff4.ex5.q2': '2) BÃ©nÃ©fice pour 50, 100',
                'MH.lesson_Y1Alg_fonAff4.ex5.q3': '3) BÃ©nÃ©fice â‰¥ 1200',
                'MH.lesson_Y1Alg_fonAff4.ex5.q4': '4) TracÃ© et pente',
                // Summary
                'MH.lesson_Y1Alg_fonAff4.summary': 'RÃ©sumÃ© â€“ ce que nous avons appris',
                'MH.lesson_Y1Alg_fonAff4.summary1': 'Une expression comme \\((x+a)^2 - x^2\\) se simplifie toujours en une fonction affine : \\(2ax + a^2\\).',
                'MH.lesson_Y1Alg_fonAff4.summary2': '\\((ax+b)^2 - (cx+d)^2\\) devient Ã©galement affine si les termes quadratiques sâ€™annulent.',
                'MH.lesson_Y1Alg_fonAff4.summary3': 'Pour une racine carrÃ©e \\(\\sqrt{(linÃ©aire)^2}\\), si lâ€™expression linÃ©aire est â‰¥ 0, elle se simplifie exactement en cette expression linÃ©aire (affine).',
                'MH.lesson_Y1Alg_fonAff4.summary4': 'On peut rÃ©soudre des Ã©quations et inÃ©quations avec ces fonctions affines en utilisant les mÃªmes rÃ¨gles quâ€™auparavant.',
                'MH.lesson_Y1Alg_fonAff4.summary5': 'Des situations rÃ©elles peuvent Ãªtre modÃ©lisÃ©es par ces fonctions affines cachÃ©es â€“ la pente donne lâ€™augmentation par unitÃ©.',
                // Footer
                'MH.footer.developer': 'DÃ©veloppeur',
                'MH.footer.version': 'Version',
                'MH.footer.links': 'Liens',
                'MH.footer.terms': 'Conditions d\'utilisation',
                'MH.footer.privacy': 'Politique de confidentialitÃ©',
                // French detailed solutions (String.raw)
                'MH.lesson_Y1Alg_fonAff4.ex1.sol1': String.raw`<strong>Solution 1 â€“ Simplification :</strong> \((x+3)^2 = x^2 + 6x + 9\). On soustrait \(x^2\) : \(x^2+6x+9 - x^2 = 6x+9\). Donc \(f(x)=6x+9\). Câ€™est de la forme \(ax+b\) avec \(a=6, b=9\) â†’ fonction affine.`,
                'MH.lesson_Y1Alg_fonAff4.ex1.sol2': String.raw`<strong>Solution 2 â€“ Pente et ordonnÃ©e :</strong> \(f(x)=6x+9\) â†’ pente \(6\), ordonnÃ©e Ã  lâ€™origine \(9\).`,
                'MH.lesson_Y1Alg_fonAff4.ex1.sol4': String.raw`<strong>Solution 4 â€“ RÃ©soudre f(x)=6 :</strong> \(6x+9 = 6\) â†’ \(6x = -3\) â†’ \(x = -0,5\).`,
                'MH.lesson_Y1Alg_fonAff4.ex2.sol1': String.raw`<strong>Solution 1 â€“ Simplifier g(x) :</strong> \((2x-1)^2 = 4x^2 -4x +1\). Soustraire \(4x^2\) : \(4x^2-4x+1-4x^2 = -4x+1\). Donc \(g(x)=-4x+1\), affine (pente -4, ordonnÃ©e 1).`,
                'MH.lesson_Y1Alg_fonAff4.ex2.sol2': String.raw`<strong>Solution 2 â€“ RÃ©soudre g(x)=0 :</strong> \(-4x+1=0\) â†’ \(1=4x\) â†’ \(x = \frac14 = 0,25\).`,
                'MH.lesson_Y1Alg_fonAff4.ex2.sol3': String.raw`<strong>Solution 3 â€“ RÃ©soudre g(x) â‰¤ 2 :</strong> \(-4x+1 \le 2\) â†’ soustraire 1 : \(-4x \le 1\) â†’ diviser par -4 (inverser lâ€™inÃ©galitÃ©) : \(x \ge -\frac14\). En intervalles : \([-0,25, +\infty)\).`,
                'MH.lesson_Y1Alg_fonAff4.ex3.sol1': String.raw`<strong>Solution 1 â€“ Simplifier h(x) :</strong> \(\sqrt{(x+4)^2} = |x+4|\). Comme le domaine est \(x \ge -4\), \(x+4 \ge 0\) donc \(|x+4| = x+4\). Ainsi \(h(x)=x+4\).`,
                'MH.lesson_Y1Alg_fonAff4.ex3.sol2': String.raw`<strong>Solution 2 â€“ Affine ?</strong> Oui, \(h(x)=x+4\) est affine : pente \(1\), ordonnÃ©e \(4\).`,
                'MH.lesson_Y1Alg_fonAff4.ex3.sol3': String.raw`<strong>Solution 3 â€“ RÃ©soudre h(x)=7 :</strong> \(x+4 = 7\) â†’ \(x = 3\) (3 â‰¥ -4, valide).`,
                'MH.lesson_Y1Alg_fonAff4.ex3.sol4': String.raw`<strong>Solution 4 â€“ k(x) :</strong> Pour \(x \ge -3\), \(2x+6 \ge 0\) donc \(\sqrt{(2x+6)^2}=2x+6\). Affine, pente 2, ordonnÃ©e 6. RÃ©soudre \(2x+6=4\) â†’ \(2x=-2\) â†’ \(x=-1\) (valide).`,
                'MH.lesson_Y1Alg_fonAff4.ex4.sol1': String.raw`<strong>Solution 1 â€“ Simplifier f et g :</strong> \(f(x)=(x+5)^2-(x-1)^2 = (x^2+10x+25) - (x^2-2x+1) = 12x+24\). \(g(x)=(2x+3)^2-(2x-3)^2 = (4x^2+12x+9) - (4x^2-12x+9) = 24x\). Les deux sont affines.`,
                'MH.lesson_Y1Alg_fonAff4.ex4.sol2': String.raw`<strong>Solution 2 â€“ Intersection :</strong> \(f(x)=g(x)\) â†’ \(12x+24 = 24x\) â†’ \(24 = 12x\) â†’ \(x = 2\). Puis \(y = 24Â·2 = 48\) (ou \(12Â·2+24=48\)). Point \((2,48)\).`,
                'MH.lesson_Y1Alg_fonAff4.ex4.sol3': String.raw`<strong>Solution 3 â€“ f(x) â‰¥ g(x) :</strong> \(12x+24 \ge 24x\) â†’ \(24 \ge 12x\) â†’ \(x \le 2\). Donc pour \(x \le 2\), f est au-dessus ou Ã©gale Ã  g.`,
                'MH.lesson_Y1Alg_fonAff4.ex5.sol1': String.raw`<strong>Solution 1 â€“ Simplifier P(x) :</strong> \((x+20)^2 = x^2 + 40x + 400\). Soustraire \(x^2\) : \(P(x)=40x+400\). Fonction affine.`,
                'MH.lesson_Y1Alg_fonAff4.ex5.sol2': String.raw`<strong>Solution 2 â€“ BÃ©nÃ©fice pour 50, 100 :</strong> \(P(50)=40Â·50+400 = 2000+400=2400\) D. \(P(100)=40Â·100+400=4000+400=4400\) D.`,
                'MH.lesson_Y1Alg_fonAff4.ex5.sol3': String.raw`<strong>Solution 3 â€“ BÃ©nÃ©fice â‰¥ 1200 :</strong> \(40x+400 \ge 1200\) â†’ \(40x \ge 800\) â†’ \(x \ge 20\). Au moins 20 cahiers.`,
            }
        };

        // Merge translations
        if (typeof window.translations !== 'undefined') {
            Object.keys(fonAff4Translations).forEach(lang => {
                window.translations[lang] = { ...window.translations[lang], ...fonAff4Translations[lang] };
            });
        } else {
            window.translations = fonAff4Translations;
        }

        // ========== I18N, THEME, LANGUAGE ==========
        let currentLanguage = localStorage.getItem('MH-language') || 'en';
        document.documentElement.lang = currentLanguage;

        // Helper: get computed CSS variable color
        function getCSSVar(varName) {
            return getComputedStyle(document.documentElement).getPropertyValue(varName).trim() || '#000000';
        }

        function applyTranslations(lang) {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (window.translations[lang] && window.translations[lang][key]) {
                    el.innerHTML = window.translations[lang][key];
                }
            });
            // Set solution content for each exercise
            const solMap = {
                'ex1_sol1': 'MH.lesson_Y1Alg_fonAff4.ex1.sol1',
                'ex1_sol2': 'MH.lesson_Y1Alg_fonAff4.ex1.sol2',
                'ex1_sol4': 'MH.lesson_Y1Alg_fonAff4.ex1.sol4',
                'ex2_sol1': 'MH.lesson_Y1Alg_fonAff4.ex2.sol1',
                'ex2_sol2': 'MH.lesson_Y1Alg_fonAff4.ex2.sol2',
                'ex2_sol3': 'MH.lesson_Y1Alg_fonAff4.ex2.sol3',
                'ex3_sol1': 'MH.lesson_Y1Alg_fonAff4.ex3.sol1',
                'ex3_sol2': 'MH.lesson_Y1Alg_fonAff4.ex3.sol2',
                'ex3_sol3': 'MH.lesson_Y1Alg_fonAff4.ex3.sol3',
                'ex3_sol4': 'MH.lesson_Y1Alg_fonAff4.ex3.sol4',
                'ex4_sol1': 'MH.lesson_Y1Alg_fonAff4.ex4.sol1',
                'ex4_sol2': 'MH.lesson_Y1Alg_fonAff4.ex4.sol2',
                'ex4_sol3': 'MH.lesson_Y1Alg_fonAff4.ex4.sol3',
                'ex5_sol1': 'MH.lesson_Y1Alg_fonAff4.ex5.sol1',
                'ex5_sol2': 'MH.lesson_Y1Alg_fonAff4.ex5.sol2',
                'ex5_sol3': 'MH.lesson_Y1Alg_fonAff4.ex5.sol3'
            };
            for (let [id, key] of Object.entries(solMap)) {
                const el = document.getElementById(id);
                if (el && window.translations[lang] && window.translations[lang][key]) {
                    el.innerHTML = window.translations[lang][key];
                }
            }
            // Update solution buttons text
            document.querySelectorAll('.MH-solution-btn').forEach(btn => {
                if (btn.textContent.includes('Show') || btn.textContent.includes('Afficher') || btn.textContent.includes('Ø¹Ø±Ø¶')) {
                    btn.textContent = window.translations[lang]['MH.lesson_Y1Alg_fonAff4.showSolution'] || 'Show Solution';
                }
            });
            if (typeof renderMathInElement !== 'undefined') {
                renderMathInElement(document.body, { delimiters: [{left: '$', right: '$', display: false}, {left: '\\(', right: '\\)', display: false}], throwOnError: false });
            }
            drawAllCanvases(); // redraw with new theme colors
        }

        // Language selector
        const languageBtn = document.getElementById('languageBtn');
        const dropdown = document.getElementById('languageDropdown');
        if (languageBtn) {
            languageBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                dropdown.classList.toggle('show');
            });
            document.querySelectorAll('.MH-language-option').forEach(opt => {
                opt.addEventListener('click', (e) => {
                    e.preventDefault();
                    const lang = e.target.getAttribute('data-lang');
                    currentLanguage = lang;
                    localStorage.setItem('MH-language', lang);
                    document.documentElement.lang = lang;
                    applyTranslations(lang);
                    dropdown.classList.remove('show');
                });
            });
            document.addEventListener('click', () => { dropdown.classList.remove('show'); });
        }

        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        if (themeToggle) {
            themeToggle.addEventListener('click', function() {
                const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('MH-theme', newTheme);
                setTimeout(() => { drawAllCanvases(); }, 20);
            });
        }

        // ========== CANVAS DRAWING â€“ THEME AWARE ==========
        function toX(coord, width, minX, maxX) { return ((coord - minX) / (maxX - minX)) * width; }
        function toY(coord, height, minY, maxY) { return height - ((coord - minY) / (maxY - minY)) * height; }

        function drawGrid(ctx, w, h, minX, maxX, minY, maxY) {
            const borderColor = getCSSVar('--border');
            const textColor = getCSSVar('--text');
            ctx.strokeStyle = borderColor; ctx.lineWidth = 0.5;
            // vertical grid
            for (let i = Math.ceil(minX); i <= maxX; i++) {
                ctx.beginPath();
                ctx.moveTo(toX(i, w, minX, maxX), 0);
                ctx.lineTo(toX(i, w, minX, maxX), h);
                ctx.stroke();
            }
            // horizontal grid
            for (let i = Math.ceil(minY); i <= maxY; i++) {
                ctx.beginPath();
                ctx.moveTo(0, toY(i, h, minY, maxY));
                ctx.lineTo(w, toY(i, h, minY, maxY));
                ctx.stroke();
            }
            // axes
            ctx.strokeStyle = textColor; ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(toX(0, w, minX, maxX), 0);
            ctx.lineTo(toX(0, w, minX, maxX), h);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(0, toY(0, h, minY, maxY));
            ctx.lineTo(w, toY(0, h, minY, maxY));
            ctx.stroke();
        }

        let ex1Constructed = false, ex2Constructed = false, ex3Constructed = false, ex4Constructed = false, ex5Constructed = false;

        function drawExercise1() {
            const canvas = document.getElementById('ex1Canvas'); if (!canvas) return;
            const ctx = canvas.getContext('2d'); const w=600, h=400;
            ctx.clearRect(0,0,w,h);
            const minX=-3, maxX=5, minY=-5, maxY=20;
            drawGrid(ctx, w, h, minX, maxX, minY, maxY);
            // f(x)=6x+9
            ctx.beginPath(); ctx.strokeStyle = getCSSVar('--primary'); ctx.lineWidth = 3;
            ctx.moveTo(toX(-3,w,minX,maxX), toY(6*(-3)+9, h, minY, maxY));
            ctx.lineTo(toX(5,w,minX,maxX), toY(6*5+9, h, minY, maxY)); ctx.stroke();
            // y=6 horizontal
            ctx.beginPath(); ctx.strokeStyle = getCSSVar('--warning'); ctx.setLineDash([5,5]);
            ctx.moveTo(toX(-3,w,minX,maxX), toY(6, h, minY, maxY));
            ctx.lineTo(toX(5,w,minX,maxX), toY(6, h, minY, maxY)); ctx.stroke();
            ctx.setLineDash([]);
            // intersection
            ctx.fillStyle = getCSSVar('--warning');
            ctx.beginPath(); ctx.arc(toX(-0.5,w,minX,maxX), toY(6, h, minY, maxY), 6, 0, 2*Math.PI); ctx.fill();
            ctx.fillStyle = getCSSVar('--text');
            ctx.font = '12px Arial';
            ctx.fillText('(-0.5,6)', toX(-0.5,w,minX,maxX)+10, toY(6, h, minY, maxY)-10);
            if (ex1Constructed) {
                ctx.fillStyle = getCSSVar('--primary') + '20'; // add transparency
                ctx.fillRect(0,0,w,h);
                ctx.fillStyle = getCSSVar('--text');
                ctx.fillText('Graph of f(x)=6x+9', 20, 50);
            }
        }

        function drawExercise2() {
            const canvas = document.getElementById('ex2Canvas'); if (!canvas) return;
            const ctx = canvas.getContext('2d'); const w=600, h=400;
            ctx.clearRect(0,0,w,h);
            const minX=-3, maxX=5, minY=-5, maxY=10;
            drawGrid(ctx, w, h, minX, maxX, minY, maxY);
            // g(x)=-4x+1
            ctx.beginPath(); ctx.strokeStyle = getCSSVar('--secondary'); ctx.lineWidth = 3;
            ctx.moveTo(toX(-3,w,minX,maxX), toY(-4*(-3)+1, h, minY, maxY));
            ctx.lineTo(toX(5,w,minX,maxX), toY(-4*5+1, h, minY, maxY)); ctx.stroke();
            // y=2 horizontal
            ctx.strokeStyle = getCSSVar('--accent'); ctx.setLineDash([5,5]);
            ctx.moveTo(toX(-3,w,minX,maxX), toY(2, h, minY, maxY));
            ctx.lineTo(toX(5,w,minX,maxX), toY(2, h, minY, maxY)); ctx.stroke();
            ctx.setLineDash([]);
            // intersection x = -0.25
            ctx.fillStyle = getCSSVar('--warning');
            ctx.beginPath(); ctx.arc(toX(-0.25,w,minX,maxX), toY(2, h, minY, maxY), 6, 0, 2*Math.PI); ctx.fill();
            ctx.fillStyle = getCSSVar('--text');
            ctx.fillText('x = -0.25', toX(-0.25,w,minX,maxX)+10, toY(2, h, minY, maxY)-10);
            if (ex2Constructed) {
                ctx.fillStyle = getCSSVar('--secondary') + '20';
                ctx.fillRect(toX(-0.25,w,minX,maxX), 0, w - toX(-0.25,w,minX,maxX), h);
                ctx.fillStyle = getCSSVar('--text');
                ctx.fillText('g(x) â‰¤ 2 for x â‰¥ -0.25', 200, 50);
            }
        }

        function drawExercise3() {
            const canvas = document.getElementById('ex3Canvas'); if (!canvas) return;
            const ctx = canvas.getContext('2d'); const w=600, h=400;
            ctx.clearRect(0,0,w,h);
            const minX=-4, maxX=4, minY=-2, maxY=10;
            drawGrid(ctx, w, h, minX, maxX, minY, maxY);
            // h(x)=x+4
            ctx.beginPath(); ctx.strokeStyle = getCSSVar('--accent'); ctx.lineWidth = 3;
            ctx.moveTo(toX(-4,w,minX,maxX), toY(0, h, minY, maxY));
            ctx.lineTo(toX(4,w,minX,maxX), toY(8, h, minY, maxY)); ctx.stroke();
            // k(x)=2x+6
            ctx.beginPath(); ctx.strokeStyle = getCSSVar('--primary'); ctx.lineWidth = 3;
            ctx.moveTo(toX(-3,w,minX,maxX), toY(0, h, minY, maxY));
            ctx.lineTo(toX(4,w,minX,maxX), toY(14, h, minY, maxY)); ctx.stroke();
            // points
            ctx.fillStyle = getCSSVar('--warning');
            ctx.beginPath(); ctx.arc(toX(3,w,minX,maxX), toY(7, h, minY, maxY), 6, 0, 2*Math.PI); ctx.fill();
            ctx.fillStyle = getCSSVar('--text');
            ctx.fillText('h(3)=7', toX(3,w,minX,maxX)+10, toY(7, h, minY, maxY)-10);
            ctx.fillStyle = getCSSVar('--warning');
            ctx.beginPath(); ctx.arc(toX(-1,w,minX,maxX), toY(4, h, minY, maxY), 6, 0, 2*Math.PI); ctx.fill();
            ctx.fillStyle = getCSSVar('--text');
            ctx.fillText('k(-1)=4', toX(-1,w,minX,maxX)+10, toY(4, h, minY, maxY)-10);
        }

        function drawExercise4() {
            const canvas = document.getElementById('ex4Canvas'); if (!canvas) return;
            const ctx = canvas.getContext('2d'); const w=600, h=400;
            ctx.clearRect(0,0,w,h);
            const minX=-5, maxX=5, minY=-60, maxY=60;
            drawGrid(ctx, w, h, minX, maxX, minY, maxY);
            // f(x)=12x+24
            ctx.beginPath(); ctx.strokeStyle = getCSSVar('--primary'); ctx.lineWidth = 3;
            ctx.moveTo(toX(-5,w,minX,maxX), toY(12*(-5)+24, h, minY, maxY));
            ctx.lineTo(toX(5,w,minX,maxX), toY(12*5+24, h, minY, maxY)); ctx.stroke();
            // g(x)=24x
            ctx.beginPath(); ctx.strokeStyle = getCSSVar('--secondary'); ctx.lineWidth = 3;
            ctx.moveTo(toX(-5,w,minX,maxX), toY(24*(-5), h, minY, maxY));
            ctx.lineTo(toX(5,w,minX,maxX), toY(24*5, h, minY, maxY)); ctx.stroke();
            // Intersection (2,48)
            ctx.fillStyle = getCSSVar('--warning');
            ctx.beginPath(); ctx.arc(toX(2,w,minX,maxX), toY(48, h, minY, maxY), 6, 0, 2*Math.PI); ctx.fill();
            ctx.fillStyle = getCSSVar('--text');
            ctx.fillText('(2,48)', toX(2,w,minX,maxX)+10, toY(48, h, minY, maxY)-10);
        }

        function drawExercise5() {
            const canvas = document.getElementById('ex5Canvas'); if (!canvas) return;
            const ctx = canvas.getContext('2d'); const w=600, h=400;
            ctx.clearRect(0,0,w,h);
            const minX=0, maxX=100, minY=0, maxY=5000;
            drawGrid(ctx, w, h, minX, maxX, minY, maxY);
            // P(x)=40x+400
            ctx.beginPath(); ctx.strokeStyle = getCSSVar('--primary'); ctx.lineWidth = 3;
            ctx.moveTo(toX(0,w,minX,maxX), toY(400, h, minY, maxY));
            ctx.lineTo(toX(100,w,minX,maxX), toY(40*100+400, h, minY, maxY)); ctx.stroke();
            // y=1200 horizontal
            ctx.strokeStyle = getCSSVar('--warning'); ctx.setLineDash([5,5]);
            ctx.moveTo(toX(0,w,minX,maxX), toY(1200, h, minY, maxY));
            ctx.lineTo(toX(100,w,minX,maxX), toY(1200, h, minY, maxY)); ctx.stroke();
            ctx.setLineDash([]);
            // Intersection x=20
            ctx.fillStyle = getCSSVar('--warning');
            ctx.beginPath(); ctx.arc(toX(20,w,minX,maxX), toY(1200, h, minY, maxY), 6, 0, 2*Math.PI); ctx.fill();
            ctx.fillStyle = getCSSVar('--text');
            ctx.fillText('x=20', toX(20,w,minX,maxX)+10, toY(1200, h, minY, maxY)-10);
            if (ex5Constructed) {
                ctx.fillStyle = getCSSVar('--primary') + '20';
                ctx.fillRect(toX(20,w,minX,maxX), 0, w, h);
                ctx.fillStyle = getCSSVar('--text');
                ctx.fillText('Profit â‰¥ 1200 for x â‰¥ 20', 200, 50);
            }
        }

        function drawAllCanvases() { 
            drawExercise1(); 
            drawExercise2(); 
            drawExercise3(); 
            drawExercise4(); 
            drawExercise5(); 
        }

        window.constructExercise1 = function() { ex1Constructed = !ex1Constructed; drawExercise1(); };
        window.constructExercise2 = function() { ex2Constructed = !ex2Constructed; drawExercise2(); };
        window.constructExercise3 = function() { ex3Constructed = !ex3Constructed; drawExercise3(); };
        window.constructExercise4 = function() { ex4Constructed = !ex4Constructed; drawExercise4(); };
        window.constructExercise5 = function() { ex5Constructed = !ex5Constructed; drawExercise5(); };
        window.toggleSolution = function(id) {
            const sol = document.getElementById(id);
            if (sol.style.display === 'block') sol.style.display = 'none';
            else { 
                sol.style.display = 'block'; 
                if (typeof renderMathInElement !== 'undefined') 
                    renderMathInElement(sol, { delimiters: [{left:'$',right:'$',display:false},{left:'\\(',right:'\\)',display:false}], throwOnError: false });
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('MH-theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            applyTranslations(currentLanguage);
            drawAllCanvases();
            document.querySelectorAll('.MH-solution').forEach(el => el.style.display = 'none');
        });

        if ('serviceWorker' in navigator) { window.addEventListener('load', () => { navigator.serviceWorker.register('/sw.js').catch(()=>{}); }); }
    </script>
    <noscript><div class="MH-warning">JavaScript is recommended for interactive features.</div></noscript>
</body>
</html>